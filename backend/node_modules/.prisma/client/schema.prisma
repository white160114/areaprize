// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ユーザーテーブル
model User {
  user_id     Int      @id @default(autoincrement())
  user_name   String   @unique
  password    String
  mail        String   @unique
  profile_icon String   @default("https://areaprize.kurumimnm.net/image/person.png")
  rank_point  Int      @default(0)
}

// 作品テーブル
model Work {
  work_id      Int      @id @default(autoincrement())
  work_name    String
  explanation  String
  title_image  String
  good         Int      @default(0)
  category_id  Int
  theme_id     Int
  made_by      Int
  date         DateTime @default(now())
}

// ランクテーブル
model Rank {
  rank_name   String  @id
  high_point  Int
  low_point   Int
  icon        String
}

// 都道府県テーブル
model Prefecture {
  prefecture_id  Int     @id
  prefecture_name String
  event_count    Int     @default(0)
}

// カテゴリーテーブル
model Category {
  category_id    Int     @id
  category_name  String
}

// お題テーブル
model Theme {
  theme_id      Int      @id @default(autoincrement())
  prefecture_id Int
  theme         String
  date          DateTime @default(now())
}

// お気に入りテーブル
model Bookmark {
  user_id   Int
  work_id   Int
  @@id([user_id, work_id])
}

// コメントテーブル
model Comment {
  comment_id         Int      @id @default(autoincrement())
  parent_comment_id  Int?
  work_id            Int
  user_id            Int
  text               String
  date               DateTime @default(now())

  @@index([work_id])
  @@index([user_id])
  @@index([parent_comment_id])
}